<html>
<body>
<p>Data: <pre id="data"></pre></p>

<script type="text/javascript">
  (async () => {
    const uri = 'http://worldtimeapi.org/api/timezone/Asia/Ho_Chi_Minh'
    const dataContainer = document.getElementById('data')

    const getData = async () => {
      const response = await fetch(uri)

      if (!response.ok) {
        throw new Error(`Server returned error: ${response.status} ${response.statusText}`)
      }

      return response.text()
    }

    const refreshData = async () => {
      try {
        dataContainer.innerText = await getData()
        setTimeout(refreshData, 1000)
      }
      catch (e) {
        console.error(`Can't fetch the data.`, e)
        console.error(`Scheduled to retry 5 seconds past.`)
        setTimeout(refreshData, 5000)
      }
    }

    await refreshData()
  })()
</script>
</body>
</html>
